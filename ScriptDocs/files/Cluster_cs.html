<!DOCTYPE html><html><head><meta charset='UTF-8'><title>Cluster.cs - 詳細</title><link rel='stylesheet' href='../styles.css'></head><body><div class='container'><div class='nav-bar'><a href='../index.html'>&lt; トップページへ戻る</a> | <span>File: Cluster.cs</span></div><div style='background:#666; color:white; padding:10px 15px; border-radius:5px; margin-bottom:20px;'>File Path: <span style='opacity:0.8'>Assets/Photon/PhotonUnityNetworking/Demos/DemoProcedural/Scripts/Cluster.cs</span></div><div id='Cluster' style='border:1px solid #ccc; border-top:none; padding:20px; background:white; margin-bottom:40px; border-radius:5px;'><h3><span><span class='tag tag-cls'>Class</span> Cluster <span style='color:#7f8c8d; font-weight:normal; font-size:0.9em;'>: MonoBehaviourPunCallbacks</span></span><span style='font-size:0.8em; font-weight:normal; color:#666;'>Photon.Pun.Demo.Procedural</span></h3><div class='desc-box'>The Cluster component has references to all Blocks that are part of this Cluster.<br/>It provides functions for modifying single Blocks inside this Cluster.<br/>It also handles modifications made to the world by other clients.</div><h4>フィールド (Variables)</h4><table><thead><tr><th>アクセス</th><th>名前</th><th>型</th><th>説明</th><th>属性・制約</th></tr></thead><tbody><tr><td class='center'><span class='acc acc-private'>private</span></td><td><b>propertiesKey</b></td><td class='center'><code>String</code></td><td></td><td class='center'></td></tr><tr><td class='center'><span class='acc acc-private'>private</span></td><td><b>propertiesValue</b></td><td class='center'><code>Dictionary`2</code></td><td></td><td class='center'></td></tr></tbody></table><h4>プロパティ (Properties)</h4><table><thead><tr><th>アクセス</th><th>名前</th><th>型</th><th>説明</th></tr></thead><tbody><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>ClusterId</b> <span style='font-size:0.8em; color:#888'>{ get; set; }</span></td><td class='center'><code>Int32</code></td><td></td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>Blocks</b> <span style='font-size:0.8em; color:#888'>{ get; set; }</span></td><td class='center'><code>Dictionary`2</code></td><td></td></tr></tbody></table><h4>メソッド (Methods)</h4><table><thead><tr><th>アクセス</th><th>名前</th><th>引数</th><th>戻り値</th><th>説明</th></tr></thead><tbody><tr><td class='center'><span class='acc acc-public'>public</span></td><td><span class='tag tag-magic'>Event</span><b>Awake</b></td><td><small></small></td><td class='center'><code>Void</code></td><td>Unity Event Function</td></tr><tr><td class='center'><span class='acc acc-private'>private</span></td><td><span class='tag tag-magic'>Event</span><b>Start</b></td><td><small></small></td><td class='center'><code>Void</code></td><td>Sets the unique key of this Cluster used for storing modifications within the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>AddBlock</b></td><td><small>Int32 blockId, GameObject block</small></td><td class='center'><code>Void</code></td><td>Adds a Block to the Cluster.
This is called by the WorldGenerator while the generation process is running.
In order to modify Blocks directly, we are storing the ID as well as a reference to the certain GameObject.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>DestroyCluster</b></td><td><small></small></td><td class='center'><code>Void</code></td><td>Gets called before a new world can be generated.
Destroys each Block from this Cluster and removes the data stored in the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>DecreaseBlockHeight</b></td><td><small>Int32 blockId</small></td><td class='center'><code>Void</code></td><td>Decreases a Block&#39;s height locally before applying the modification to the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>IncreaseBlockHeight</b></td><td><small>Int32 blockId</small></td><td class='center'><code>Void</code></td><td>Increases a Block&#39;s height locally before applying the modification to the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>SetBlockHeightRemote</b></td><td><small>Int32 blockId, Single height</small></td><td class='center'><code>Void</code></td><td>Gets called when a remote client has modified a certain Block within this Cluster.
Called by the WorldGenerator or the Cluster itself after the Custom Room Properties have been updated.</td></tr><tr><td class='center'><span class='acc acc-private'>private</span></td><td><b>SetBlockHeightLocal</b></td><td><small>Int32 blockId, Single height</small></td><td class='center'><code>Void</code></td><td>Gets called whenever the local client modifies any Block within this Cluster.
The modification will be applied to the Block first before it is published to the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-private'>private</span></td><td><b>UpdateRoomProperties</b></td><td><small>Int32 blockId, Single height</small></td><td class='center'><code>Void</code></td><td>Gets called in order to update the Custom Room Properties with the modification made by the local client.</td></tr><tr><td class='center'><span class='acc acc-private'>private</span></td><td><b>RemoveClusterFromRoomProperties</b></td><td><small></small></td><td class='center'><code>Void</code></td><td>Removes the modifications of this Cluster from the Custom Room Properties.</td></tr><tr><td class='center'><span class='acc acc-public'>public</span></td><td><b>OnRoomPropertiesUpdate</b></td><td><small>Hashtable propertiesThatChanged</small></td><td class='center'><code>Void</code></td><td>Gets called whenever the Custom Room Properties are updated.
When the changed properties contain the previously set PropertiesKey (basically the Cluster ID),
the Cluster and its Blocks will be updated accordingly.</td></tr></tbody></table></div></div></body></html>